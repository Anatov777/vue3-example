import{d as y,u as x,b as T,r as _,w,e as f,f as h,o,c as P,F as b,g as $,h as m,a as L,_ as B,n as F,i as k,j as H,k as N,t as U,l as j,m as z}from"./index.5b7a60c8.js";import{u as D}from"./useCataas.761f82dd.js";const S=["src"],G=y({__name:"CatalogList",props:{list:{default:()=>[]},currentPage:{default:1},itemsPerPage:{default:10}},emits:["update:currentPage"],setup(n,{emit:v}){const e=n,t=x(),u=T(),g=_(null);w(()=>e.currentPage,()=>{if(e.currentPage&&e.currentPage!==Number(t.query.page)){let i={page:`${e.currentPage}`};e.currentPage===1&&(i={}),u.push({path:t.path,query:i})}g.value&&g.value.scrollIntoView({behavior:"smooth"})}),w(()=>t.path,i=>{i==="/"&&!t.query.page&&v("update:currentPage",1)},{deep:!0,immediate:!0});const p=f(()=>{if(!e.list.length)return[];const i=[],r=(e.currentPage-1)*e.itemsPerPage,l=r+e.itemsPerPage;for(let d=r;d<l&&e.list[d];d++)i.push(e.list[d]);return i});return(i,r)=>h(p).length?(o(),P("div",{key:0,class:"catalog-list",ref_key:"catalogElement",ref:g},[(o(!0),P(b,null,$(h(p),l=>(o(),P("div",{key:l._id,class:"catalog-list__item"},[L("img",{src:`https://cataas.com/cat/${l._id}`,width:"300",height:"400",class:"preloader"},null,8,S)]))),128))],512)):m("",!0)}});const J=B(G,[["__scopeId","data-v-977024c4"]]),K={class:"pagination-bar"},O=["onClick"],Q=y({__name:"PaginationBar",props:{activePage:{default:1},perPage:{default:10},lastPage:{default:1}},emits:["update:activePage"],setup(n,{emit:v}){const e=n,t=f(()=>e.lastPage<40?Math.ceil((e.lastPage-5)/2)+5:Math.ceil((e.lastPage-5)/2)),u=f(()=>{const a=[];if(e.lastPage<8)for(let s=1;s<=e.lastPage;s++)a.push(s);else if(e.activePage<5){for(let s=1;s<=5;s++)a.push(s);a.push(t.value),a.push(e.lastPage)}else if(e.activePage>=e.lastPage-4){a.push(1),e.lastPage>=40&&a.push(t.value),e.activePage===e.lastPage-4&&(a.push(e.activePage-2),a.push(e.activePage-1));for(let s=e.lastPage-4;s<=e.lastPage;s++)a.push(s)}else a.push(1),e.activePage===5&&a.push(2),e.activePage<t.value+2&&a.push(...g()),t.value>=e.activePage-2&&t.value<=e.activePage+2||a.push(t.value),e.activePage>=t.value+2&&a.push(...g()),a.push(e.lastPage);return a}),g=()=>{const a=[];for(let s=e.activePage-2;s<=e.activePage+2;s++)a.push(s);return a},p=a=>e.lastPage>=8&&(a===1&&e.activePage>5||a===t.value&&e.activePage>t.value+2&&t.value<e.lastPage-4),i=a=>e.lastPage>=8&&(a===e.lastPage&&e.activePage<=e.lastPage-5||a===t.value&&e.activePage<t.value-2),r=a=>l(a)||d(a)||M(a)||A(a)||V(a)||q(a)||I(a),l=a=>a===e.activePage-2&&e.activePage!==e.lastPage,d=a=>a===e.activePage+2&&a!==e.lastPage&&e.activePage!==1,M=a=>a===t.value&&e.activePage-1!==t.value&&e.activePage+1!==t.value&&e.activePage!==t.value&&e.lastPage>5,A=a=>a===1&&e.activePage>2&&e.activePage!==e.lastPage,V=a=>e.activePage<3&&a>3&&a!==e.lastPage,q=a=>e.activePage===e.lastPage&&a<e.lastPage-2&&a!==1,I=a=>(a<e.activePage-1||a>e.activePage+1)&&a!==e.lastPage&&e.activePage!==e.lastPage&&e.activePage!==1,E=a=>{v("update:activePage",a)},C=a=>{v("update:activePage",a)};return(a,s)=>{const R=j("router-link");return o(),P("ul",K,[n.activePage!==1?(o(),P("li",{key:0,class:"pagination-bar__arrow pagination-bar__arrow--left",onClick:s[0]||(s[0]=c=>C(n.activePage-1))}," < ")):m("",!0),(o(!0),P(b,null,$(h(u),c=>(o(),P("li",{key:c,class:F(["pagination-bar__page",{"active-page":c===n.activePage,"page-mr":p(c),"page-ml":i(c),"mobile-hidden-link":r(c)}]),onClick:Y=>E(c)},[k(R,{to:`/?page=${c}`,class:"pagination-bar__page-link"},{default:H(()=>[N(U(c),1)]),_:2},1032,["to"])],10,O))),128)),n.activePage!==n.lastPage?(o(),P("li",{key:1,class:"pagination-bar__arrow pagination-bar__arrow--right",onClick:s[1]||(s[1]=c=>C(n.activePage+1))}," > ")):m("",!0)])}}});const W=B(Q,[["__scopeId","data-v-67a50795"]]),X=L("h1",{class:"text-center mb-10"},"\u041A\u0430\u0442\u0430\u043B\u043E\u0433",-1),ae=y({__name:"HomeView",setup(n){const v=x(),{getCats:e}=D(),t=_([]),u=_(1),g=_(10),p=f(()=>t.value?Math.ceil(t.value.length/g.value):1);return z(async()=>{v.query.page&&(u.value=Number(v.query.page)),t.value=await e()}),(i,r)=>(o(),P("div",null,[X,k(J,{"current-page":u.value,"onUpdate:current-page":r[0]||(r[0]=l=>u.value=l),list:t.value},null,8,["current-page","list"]),k(W,{"active-page":u.value,"onUpdate:active-page":r[1]||(r[1]=l=>u.value=l),lastPage:h(p),"per-page":g.value},null,8,["active-page","lastPage","per-page"])]))}});export{ae as default};
