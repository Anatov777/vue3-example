import{d as m,o as n,c as r,a as k,_ as x,u as b,b as R,r as p,w,e as f,f as h,F as A,g as B,h as y,i as T,n as F,j as C,k as j,l as H,t as N,m as U,p as z}from"./index.8128e601.js";import{u as S}from"./useCataas.761f82dd.js";const G={class:"catalog-card"},J={class:"catalog-card__top"},K=["src"],O=m({__name:"CatalogItem",props:{itemData:{default:()=>{}}},setup(i){return(_,e)=>(n(),r("div",G,[k("div",J,[k("img",{src:`https://cataas.com/cat/${i.itemData._id}`,width:"300",height:"400",class:"preloader"},null,8,K)])]))}});const Q=x(O,[["__scopeId","data-v-2c62195f"]]),W=m({__name:"CatalogList",props:{list:{default:()=>[]},currentPage:{default:1},itemsPerPage:{default:10}},emits:["update:currentPage"],setup(i,{emit:_}){const e=i,t=b(),g=R(),P=p(null);w(()=>e.currentPage,()=>{if(e.currentPage&&e.currentPage!==Number(t.query.page)){let l={page:`${e.currentPage}`};e.currentPage===1&&(l={}),g.push({path:t.path,query:l})}P.value&&P.value.scrollIntoView({behavior:"smooth"})}),w(()=>t.path,l=>{l==="/"&&!t.query.page&&_("update:currentPage",1)},{deep:!0,immediate:!0});const d=f(()=>{if(!e.list.length)return[];const l=[],u=(e.currentPage-1)*e.itemsPerPage,v=u+e.itemsPerPage;for(let c=u;c<v&&e.list[c];c++)l.push(e.list[c]);return l});return(l,u)=>h(d).length?(n(),r("div",{key:0,class:"catalog-list",ref_key:"catalogElement",ref:P},[(n(!0),r(A,null,B(h(d),v=>(n(),T(Q,{key:v._id,"item-data":v,class:"catalog-list__item"},null,8,["item-data"]))),128))],512)):y("",!0)}});const X=x(W,[["__scopeId","data-v-47e5e908"]]),Y={class:"pagination-bar"},Z=["onClick"],ee=m({__name:"PaginationBar",props:{activePage:{default:1},perPage:{default:10},lastPage:{default:1}},emits:["update:activePage"],setup(i,{emit:_}){const e=i,t=f(()=>e.lastPage<40?Math.ceil((e.lastPage-5)/2)+5:Math.ceil((e.lastPage-5)/2)),g=f(()=>{const a=[];if(e.lastPage<8)for(let s=1;s<=e.lastPage;s++)a.push(s);else if(e.activePage<5){for(let s=1;s<=5;s++)a.push(s);a.push(t.value),a.push(e.lastPage)}else if(e.activePage>=e.lastPage-4){a.push(1),e.lastPage>=40&&a.push(t.value),e.activePage===e.lastPage-4&&(a.push(e.activePage-2),a.push(e.activePage-1));for(let s=e.lastPage-4;s<=e.lastPage;s++)a.push(s)}else a.push(1),e.activePage===5&&a.push(2),e.activePage<t.value+2&&a.push(...P()),t.value>=e.activePage-2&&t.value<=e.activePage+2||a.push(t.value),e.activePage>=t.value+2&&a.push(...P()),a.push(e.lastPage);return a}),P=()=>{const a=[];for(let s=e.activePage-2;s<=e.activePage+2;s++)a.push(s);return a},d=a=>e.lastPage>=8&&(a===1&&e.activePage>5||a===t.value&&e.activePage>t.value+2&&t.value<e.lastPage-4),l=a=>e.lastPage>=8&&(a===e.lastPage&&e.activePage<=e.lastPage-5||a===t.value&&e.activePage<t.value-2),u=a=>v(a)||c(a)||I(a)||L(a)||M(a)||V(a)||q(a),v=a=>a===e.activePage-2&&e.activePage!==e.lastPage,c=a=>a===e.activePage+2&&a!==e.lastPage&&e.activePage!==1,I=a=>a===t.value&&e.activePage-1!==t.value&&e.activePage+1!==t.value&&e.activePage!==t.value&&e.lastPage>5,L=a=>a===1&&e.activePage>2&&e.activePage!==e.lastPage,M=a=>e.activePage<3&&a>3&&a!==e.lastPage,V=a=>e.activePage===e.lastPage&&a<e.lastPage-2&&a!==1,q=a=>(a<e.activePage-1||a>e.activePage+1)&&a!==e.lastPage&&e.activePage!==e.lastPage&&e.activePage!==1,E=a=>{_("update:activePage",a)},$=a=>{_("update:activePage",a)};return(a,s)=>{const D=U("router-link");return n(),r("ul",Y,[i.activePage!==1?(n(),r("li",{key:0,class:"pagination-bar__arrow pagination-bar__arrow--left",onClick:s[0]||(s[0]=o=>$(i.activePage-1))}," < ")):y("",!0),(n(!0),r(A,null,B(h(g),o=>(n(),r("li",{key:o,class:F(["pagination-bar__page",{"active-page":o===i.activePage,"page-mr":d(o),"page-ml":l(o),"mobile-hidden-link":u(o)}]),onClick:ne=>E(o)},[C(D,{to:`/?page=${o}`,class:"pagination-bar__page-link"},{default:j(()=>[H(N(o),1)]),_:2},1032,["to"])],10,Z))),128)),i.activePage!==i.lastPage?(n(),r("li",{key:1,class:"pagination-bar__arrow pagination-bar__arrow--right",onClick:s[1]||(s[1]=o=>$(i.activePage+1))}," > ")):y("",!0)])}}});const ae=x(ee,[["__scopeId","data-v-67a50795"]]),te=k("h1",{class:"text-center mb-10"},"\u041A\u0430\u0442\u0430\u043B\u043E\u0433",-1),se={key:0},ie={key:1,class:"flex justify-center"},ue=m({__name:"HomeView",setup(i){const _=b(),{getCats:e}=S(),t=p([]),g=p(1),P=p(10),d=f(()=>t.value?Math.ceil(t.value.length/P.value):1);return z(async()=>{_.query.page&&(g.value=Number(_.query.page)),t.value=await e()}),(l,u)=>{var v;return n(),r("div",null,[te,(v=t.value)!=null&&v.length?(n(),r("div",se,[C(X,{"current-page":g.value,"onUpdate:current-page":u[0]||(u[0]=c=>g.value=c),list:t.value},null,8,["current-page","list"]),C(ae,{"active-page":g.value,"onUpdate:active-page":u[1]||(u[1]=c=>g.value=c),lastPage:h(d),"per-page":P.value},null,8,["active-page","lastPage","per-page"])])):(n(),r("div",ie," \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043A\u0430\u0440\u0442\u0438\u043D\u043E\u043A... "))])}}});export{ue as default};
